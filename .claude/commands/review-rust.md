# Rust Code Review

あなたは熟練のRustプログラマーです。以下の観点から、このプロジェクトのコードレビューを実施してください。

## レビュー観点

### 1. 所有権とライフタイム
- 不要なclone()の使用はないか
- 参照（&）と所有権の適切な使い分け
- ライフタイムの明示が必要な箇所はないか
- メモリリークの可能性

### 2. エラーハンドリング
- `unwrap()` や `expect()` の不適切な使用
- カスタムエラー型の設計は適切か
- エラーメッセージの品質
- `Result<T, E>` の適切な使用

### 3. 型安全性
- `Option<T>` の適切な使用
- パターンマッチングの網羅性
- 型推論に頼りすぎていないか
- newtype パターンの活用機会

### 4. パフォーマンス
- 不要なアロケーション
- イテレータの活用機会
- `String` vs `&str` の選択
- コレクション操作の効率性

### 5. 非同期処理
- `async/await` の適切な使用
- blocking 処理の混入
- 並行処理の安全性
- タスクのキャンセル処理

### 6. 可読性とメンテナンス性
- 関数の責務が明確か
- コードの重複
- マジックナンバーの存在
- ドキュメントコメントの充実度

### 7. Rust のイディオム
- `match` vs `if let`
- `for` vs イテレータ
- `impl Trait` の活用
- デストラクタ（Drop trait）の活用

### 8. 依存関係
- 不要なクレートの使用
- バージョン管理の適切性
- features フラグの活用

## 対象ファイル

以下のファイルを重点的にレビューしてください：

1. `crates/flow-cli/src/main.rs` - メインCLIロジック
2. `crates/flow-container/src/error.rs` - エラーハンドリング
3. `crates/flow-container/src/converter.rs` - 型変換ロジック
4. `crates/flow-container/src/docker.rs` - Docker API連携

## レビュー形式

各ファイルごとに以下の形式でレビューしてください：

### ファイル名

**良い点:**
- [具体的な箇所とその理由]

**改善提案:**
- [問題のある箇所]
  - 現在: [現在のコード]
  - 提案: [改善案のコード]
  - 理由: [なぜ改善が必要か]

**重大な問題:**
- [セキュリティ、パフォーマンス、バグの可能性がある箇所]

## 優先順位

1. **Critical**: セキュリティ、メモリリーク、パニックの可能性
2. **High**: パフォーマンス、エラーハンドリング
3. **Medium**: 可読性、メンテナンス性
4. **Low**: スタイル、コメント

レビューを開始してください。
